"use strict";var __decorate=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),Subject_1=require("rxjs/Subject"),TimerService=function(){function e(){var e=this;this.gameTimer=new Timer(60,!0),this.problemTimer=new Timer(0,!1),this.extraTimer=new Timer(0,!0),this.extraTimer.timeObservable.subscribe(function(t){t<=0&&(console.log("start gameTimer"),e.extraTimer.stop(),e.gameTimer.start())}),this.gameTimer.timeObservable.subscribe(function(t){e.extraTimer.isActive()&&(console.log("start extraTimer"),e.gameTimer.stop())})}return e.prototype.setProblemTimerConfig=function(e,t){this.extraTimer.restart(),t&&e>0?(this.extraTimer.plusTime(e),this.extraTimer.start()):this.problemTimer.stop(),this.problemTimer.restart()},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],e)}();exports.TimerService=TimerService;var Timer=function(){function e(e,t){this.initialValue=e,this.countdown=t,this.timeObservable=new Subject_1.Subject,this.plusTimeSubject=new Subject_1.Subject,this.restart()}return Object.defineProperty(e.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),e.prototype.start=function(){var e=this;this._isActive||(this._isActive=!0,this.interval=setInterval(function(){e.timeObservable.next(e.countdown?e._time--:e._time++)},1e3))},e.prototype.restart=function(){this._time=this.initialValue},e.prototype.stop=function(){this._isActive&&(this._isActive=!1,clearInterval(this.interval))},e.prototype.isActive=function(){return this._isActive},e.prototype.plusTime=function(e){this.plusTimeSubject.next(e),this.timeObservable.next(this._time+=e)},e}();exports.Timer=Timer;