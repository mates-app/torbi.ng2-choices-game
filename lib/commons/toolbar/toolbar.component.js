"use strict";var __decorate=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),material_1=require("@angular/material"),popup_component_1=require("../popup/popup.component"),game_status_service_1=require("../../services/game-status.service"),timer_service_1=require("../../services/timer.service"),counter_component_1=require("../counter/counter.component"),ToolbarComponent=function(){function e(e,t,o){this.gameStatus=e,this.timerService=t,this.mdIconRegistry=o,this.config=new ToolbarConfig,o.addSvgIcon("thumb-up","/game-mates/icon/assets/thumbup-icon.svg").addSvgIconSetInNamespace("core","/game-mates/icon/assets/core-icon-set.svg").registerFontClassAlias("fontawesome","fa")}return e.prototype.ngOnInit=function(){var e=this;console.log("on init toolbar"),this.config.timerCounter.setObservableValue(this.timerService.gameTimer.timeObservable),this.config.extraTimeCounter.setObservableValue(this.timerService.extraTimer.timeObservable),this.timerService.extraTimer.timeObservable.subscribe(function(t){return e.config.showExtras=t>0}),this.config.livesCounter.value=this.gameStatus.lives,this.gameStatus.subjectScore.subscribe(function(t){e.config.scoreCounter.value+=t.allScore(),e.popupScore.message="Extra! "+t.extra+"pts",e.popupScore.toggleStatus()}),this.timerService.gameTimer.plusTimeSubject.subscribe(function(t){e.popupTime.message="Extra! "+t+"s",e.popupTime.toggleStatus()}),this.config.livesCounter.setObservableValue(this.gameStatus.subjectLives),this.config.levelCounter.setObservableValue(this.gameStatus.subjectLevel)},__decorate([core_1.Input(),__metadata("design:type",ToolbarConfig)],e.prototype,"config",void 0),__decorate([core_1.ViewChild("popupScore"),__metadata("design:type",popup_component_1.PopupComponent)],e.prototype,"popupScore",void 0),__decorate([core_1.ViewChild("popupTime"),__metadata("design:type",popup_component_1.PopupComponent)],e.prototype,"popupTime",void 0),e=__decorate([core_1.Component({moduleId:module.id,selector:"game-toolbar",templateUrl:"toolbar.component.html",styleUrls:["toolbar.component.css"],viewProviders:[material_1.MdIconRegistry]}),__metadata("design:paramtypes",[game_status_service_1.GameStatusService,timer_service_1.TimerService,material_1.MdIconRegistry])],e)}();exports.ToolbarComponent=ToolbarComponent;var ToolbarConfig=function(){function e(e,t,o,r,i,n,s){void 0===e&&(e=new counter_component_1.CounterConfig),void 0===t&&(t=new counter_component_1.CounterConfig),void 0===o&&(o=new counter_component_1.CounterConfig),void 0===r&&(r=new counter_component_1.CounterConfig),void 0===i&&(i=new counter_component_1.CounterConfig),void 0===n&&(n=!1),void 0===s&&(s=!1),this.timerCounter=e,this.scoreCounter=t,this.levelCounter=o,this.livesCounter=r,this.extraTimeCounter=i,this.showExtras=n,this.showTooltips=s}return e}();exports.ToolbarConfig=ToolbarConfig;