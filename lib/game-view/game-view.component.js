"use strict";var __decorate=this&&this.__decorate||function(e,t,a,o){var s,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(i<3?s(n):i>3?s(t,a,n):s(t,a))||n);return i>3&&n&&Object.defineProperty(t,a,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),toolbar_component_1=require("../commons/toolbar/toolbar.component"),game_status_service_1=require("../services/game-status.service"),game_control_1=require("../services/game-control"),material_1=require("@angular/material"),GameViewComponent=function(){function e(e,t,a,o){this.gameStatus=e,this.gameControl=t,this.appRef=a,this.mdIconRegistry=o,this.title="game-mates",this.viewStatus=ViewStatus.NOT_STARTED_GAME,this.gameDisplay="block",o.addSvgIcon("thumb-up","/game-mates/icon/assets/thumbup-icon.svg").addSvgIconSetInNamespace("core","/game-mates/icon/assets/core-icon-set.svg").registerFontClassAlias("fontawesome","fa")}return e.prototype.ngOnInit=function(){var e=this;this.toolbarConfig=new toolbar_component_1.ToolbarConfig,this.gameControl.onGameInstanceChange().subscribe(function(t){console.log("game-view onGameInstanceChange",t.gameId),e.gameInstance=t}),this.gameControl.onStart().subscribe(function(t){console.log("game-view onStart",t),e.loadingLevel()}),this.gameStatus.subjectLevel.subscribe(function(t){e.loadingLevel()}),this.gameStatus.subjectGameOver.subscribe(function(t){return e.gameOver(t)})},e.prototype.loadingLevel=function(){this.viewStatus=ViewStatus.LOADING_LEVEL,this.gameStatus.pauseGame(),this.gameDisplay="none"},e.prototype.playLevel=function(){this.viewStatus=ViewStatus.PLAY_LEVEL,this.gameStatus.resumeGame(),this.gameDisplay="block"},e.prototype.gameOver=function(e){this.gameOverType=e,this.viewStatus=ViewStatus.GAME_OVER,this.gameDisplay="none",this.appRef.tick()},e=__decorate([core_1.Component({moduleId:module.id,selector:"game-view",templateUrl:"game-view.component.html",styleUrls:["game-view.component.css"],viewProviders:[material_1.MdIconRegistry]}),__metadata("design:paramtypes",[game_status_service_1.GameStatusService,game_control_1.GameControl,core_1.ApplicationRef,material_1.MdIconRegistry])],e)}();exports.GameViewComponent=GameViewComponent,function(e){e[e.NOT_SELECTED_GAME=0]="NOT_SELECTED_GAME",e[e.NOT_STARTED_GAME=1]="NOT_STARTED_GAME",e[e.LOADING_LEVEL=2]="LOADING_LEVEL",e[e.PLAY_LEVEL=3]="PLAY_LEVEL",e[e.GAME_OVER=4]="GAME_OVER"}(exports.ViewStatus||(exports.ViewStatus={}));var ViewStatus=exports.ViewStatus;